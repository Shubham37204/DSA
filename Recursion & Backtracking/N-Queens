"""
Problem: N-Queens

Statement:
Given an integer n, place n queens on an n Ã— n chessboard such that no two queens attack each other.

- A queen can attack another queen if they share the same row, column, or diagonal.
- Each row must contain exactly one queen.
- No two queens can be placed in the same column.
- No two queens can be placed on the same diagonal.
- The goal is to find all distinct valid board configurations.

Return all possible valid arrangements of the n queens.
"""
class Solution:
    def solveNQueens(self, n):
        def isSafe(board, row, col, n):
            # check column
            for i in range(row):
                if board[i][col] == 'Q':
                    return False

            # upper-left diagonal
            i, j = row - 1, col - 1
            while i >= 0 and j >= 0:
                if board[i][j] == 'Q':
                    return False
                i -= 1
                j -= 1

            # upper-right diagonal
            i, j = row - 1, col + 1
            while i >= 0 and j < n:
                if board[i][j] == 'Q':
                    return False
                i -= 1
                j += 1

            return True

        def nQueen(board, row, n, ans):
            if row == n:
                ans.append(board.copy())
                return

            for col in range(n):
                if isSafe(board, row, col, n):
                    board[row] = board[row][:col] + 'Q' + board[row][col+1:]
                    nQueen(board, row + 1, n, ans)
                    board[row] = board[row][:col] + '.' + board[row][col+1:]

        board = ['.' * n for _ in range(n)]
        ans = []
        nQueen(board, 0, n, ans)
        return ans
